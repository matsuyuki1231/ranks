# ranks - 履歴付き称号プラグイン for pmmp4
ゲーマータグの横に称号を表示するプラグインです。
<br>オリジナル称号の作成、称号のショップ看板の作成、過去に作成/購入した称号の変更等ができます。
<br>**動作には[EconomyAPI](https://poggit.pmmp.io/p/EconomyAPI/5.7.3-PM4)が必要です**。

## 特徴

- 鯖民が自分の称号を作ることができます
    - 称号を作る際にゲーム内マネーを取ることもできます
    - 作成する称号に文字数制限を課すこともできます(§は文字数制限にカウントされません)
- 運営は称号のショップ看板を作ることができます
    - 販売値段は称号ごとに自由に設定できます
    - 購入時に、購入者にメッセージを送ることもできます
- 一度作成/購入した称号は、後から何度でも自由に変更できます
- 称号の購入/変更はformによるGUIで行うため、直観的に操作できます
- 初めて参加したプレイヤーには、予め設定した称号が自動で付与されます(初期状態では、「§a鯖民」)

## コマンド

コマンド | 概要 | デフォルト権限
:---:|:---|:---
/mkrank | オリジナルの称号を作ることができます<br>/rankと打ってから「称号を新規作成」を選択しても同じことができます | 全員
/chgrank | 今までの購入/作成履歴から称号を変更できます<br>/rankと打ってから「履歴から称号を変更」を選択しても同じことができます | 全員
/chgrankcost | 称号の作成にかかる費用を変更できます | OPのみ

## 使用方法

ranks.phar もしくは ranksフォルダ をpluginsフォルダの中に入れてください。ranksフォルダで使用する場合は、.pharとしてアーカイブ化されていないファイルを読み込むために[DevTools](https://poggit.pmmp.io/p/DevTools)が必要です。

## 称号の作成費用/文字数制限/初期称号を変えるには

plugin_data/ranks/config.yml内にある、
<br>「mkcost」の欄を変えると称号作成費用が、
<br>「len」の欄を変えると文字数制限が、
<br>「init」の欄を変えると初期称号が
<br>かわります(作成費用は「/chgrankcost」でも変えられます)。

## データの保存先

データは、plugin_data/ranks内にjsonとyaml形式で保存されています。

ファイル名 | 概要
:---:|:---
rankshop.json | 称号ショップ看板に関するデータを保存しています。
rank.json | プレイヤーの称号履歴などを保存しています。
config.yml | プラグインの設定です。

## 表示のされ方

チャット時:
> <[称号]プレイヤー名> テキスト

タグ:
> [称号]プレイヤー名

## 称号ショップを作るには？

看板に
<br>1行目: 称号名
<br>2行目: 値段(半角数字)
<br>3行目: 購入時のメッセージ
<br>4行目: mkrankshop
と入力すると作成できます。権限がないと作れません。
<br>また、称号ショップで作成した称号は、文字数制限が無視されます。

## ライセンスの変更について

simplemailプラグインとは異なるライセンスを使用しました(wtfpl->The Unlicense)。
<br>使用の際はご注意ください。

## Thanks

「一度作成/購入した称号は履歴から自由に変更できる」という案は SAGAと申す#5262 さんから頂きました。<br>この場を借りて御礼申し上げます。
